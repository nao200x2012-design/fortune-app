/* style.css (結果パネル背景強化版) */
:root{
  --bg:#05141e; /* 深い夜空 */
  --panel:#102535; /* 落ち着いたパネル */
  --panel2:#1a3145; /* パネルの影 */
  --text:#e9f3f9; 
  --muted:#a3b4c1; 
  --accent:#ffbc40; 
  --accent-d:#eea21a;
  --good:#6be59a; 
  --warn:#ffc266;
  /* 項目別カラーを統一 */
  --love-bg: rgba(255,179,202,.12); 
  --love-text: #ffb3ca;
  --work-bg: rgba(18,211,182,.18); 
  --work-text: #12d3b6;
  --money-bg: rgba(255,210,102,.18); 
  --money-text: #ffd266;
  --health-bg: rgba(160,255,160,.12); 
  --health-text: #a0ffa0;
  --spirit-bg: rgba(100,150,255,.12); 
  --spirit-text: #6496ff;
}
/* 文字サイズ */
html.size-s{font-size:14px}
html.size-m{font-size:16px}
html.size-l{font-size:18px}

html {
    overflow-x: hidden; /* ブレ防止 */
}

*{box-sizing:border-box}
body{
  margin:0; 
  color:var(--text);
  /* 星空のような背景グラデーションを強化 */
  background:
    /* メインの夜空グラデーション */
    radial-gradient(1200px 600px at 50% -10%, #15304a, #041019 55%, #030a10 100%), 
    /* 常駐するキラキラ（星の塵）の強化 */
    repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(255,255,255,0.06) 1px, rgba(255,255,255,0.06) 2px), 
    repeating-linear-gradient(90deg, transparent, transparent 1px, rgba(255,255,255,0.06) 1px, rgba(255,255,255,0.06) 2px), 
    var(--bg);
  font-family:"Yu Gothic","Hiragino Kaku Gothic ProN","Noto Sans JP",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  overflow-x: hidden; 
  position: relative; 
}

/* 流れ星の表現 (大きく、ゆっくり) */
.shooting-star {
  position: absolute;
  width: 6px; 
  height: 6px; 
  background-color: #fff;
  border-radius: 50%;
  box-shadow: 0 0 15px 3px #fff; 
  animation: shootingStar 18s linear infinite; 
  opacity: 0;
  transform: rotate(-45deg) translate(0, 0);
  z-index: 0; 
}

.shooting-star:before {
  content: '';
  position: absolute;
  top: 50%;
  right: 6px; 
  width: 300px; 
  height: 2px; 
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.7), transparent);
  transform: translateY(-50%);
}

/* 流れ星の遅延と位置を調整 */
.shooting-star:nth-child(1) { top: 15%; left: 5%; animation-delay: 0s; animation-duration: 18s; }
.shooting-star:nth-child(2) { top: 10%; left: 40%; animation-delay: 6s; animation-duration: 16s; } 
.shooting-star:nth-child(3) { top: 50%; left: 70%; animation-delay: 12s; animation-duration: 20s; } 
.shooting-star:nth-child(4) { top: 70%; left: 25%; animation-delay: 18s; animation-duration: 17s; } 


@keyframes shootingStar {
  0% {
    opacity: 1;
    transform: rotate(-45deg) translate(0, 0);
  }
  5% {
    opacity: 0;
  }
  5.01% {
    transform: rotate(-45deg) translate(-250vw, 250vh); 
  }
  5.02% {
    opacity: 0;
    transform: rotate(-45deg) translate(0, 0);
  }
  100% {
    opacity: 0;
  }
}

/* 常駐するキラキラエフェクト (星のまたたき) */
@keyframes flicker {
    0%, 100% { opacity: 0.6; box-shadow: 0 0 4px #ffe; }
    50% { opacity: 1; box-shadow: 0 0 8px #fff; }
}

.star-flicker {
    position: absolute;
    width: 2px;
    height: 2px;
    background-color: #fff;
    border-radius: 50%;
    animation: flicker 4s ease-in-out infinite alternate;
    z-index: 0;
}

/* 常駐するキラキラ星の配置 */
.star-flicker:nth-child(5) { top: 5%; left: 80%; animation-delay: 0.5s; }
.star-flicker:nth-child(6) { top: 40%; left: 10%; animation-delay: 1.2s; }
.star-flicker:nth-child(7) { top: 85%; left: 90%; animation-delay: 2.3s; }
.star-flicker:nth-child(8) { top: 25%; left: 60%; animation-delay: 3s; }
.star-flicker:nth-child(9) { top: 75%; left: 35%; animation-delay: 1s; }
.star-flicker:nth-child(10) { top: 55%; left: 8%; animation-delay: 4.1s; }


/* UIパーツのスタイルは変更なし */
.wrap{max-width:960px;margin:40px auto;padding:0 18px}

/* ★鑑定結果パネル（.card）の背景を修正 */
.card{
    /* 添付画像のような深みのある青い夜空のグラデーションに統一 */
    background:
        /* 上部の明るい星雲のハイライト */
        radial-gradient(800px 500px at 50% 0%, rgba(50, 100, 200, 0.3), rgba(50, 100, 200, 0) 65%),
        /* 下部の暗い雲の表現 */
        linear-gradient(180deg, #102535 0%, #0c1c2b 75%, #05141e 100%);
    border:1px solid rgba(255,255,255,.08); /* 枠を少し強調 */
    border-radius:16px; 
    box-shadow:0 12px 30px rgba(0,0,0,.5); /* 影を深くする */
    position: relative; 
    z-index: 10;
}

.box{padding:24px}

.title{text-align:center;letter-spacing:.2em;font-weight:700;padding-top:10px}
h1{margin:0;font-size:1.6rem;font-weight:900;letter-spacing:.35em}
.sp{display:inline-block;width:.3em}

/* ルビは上 */
ruby{ruby-position:over}
rt{font-size:.65em;color:var(--muted)}

.toolbar{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end;margin:8px 0 0}
.seg{background:#0a1e2a;border:1px solid rgba(255,255,255,.12);border-radius:10px;overflow:hidden}
.seg button{background:transparent;color:var(--text);border:none;padding:.45rem .8rem;cursor:pointer;font-weight:700}
.seg button.active{background:#112c3f}
.save-toggle{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:.9rem}

.grid{display:grid;gap:12px}
.g4{grid-template-columns:repeat(4,1fr)}
.col-2{grid-column:span 2}
.col-4{grid-column:span 4}
@media(max-width:860px){.g4{grid-template-columns:1fr 1fr}.col-2{grid-column:span 2}.col-4{grid-column:span 2}}
@media(max-width:540px){
    .g4{grid-template-columns:1fr}
    .col-2,.col-4{grid-column:span 1}
    .toolbar{flex-direction:column; align-items:flex-end}
    .seg{width:100%; display:flex; justify-content:center}
    .seg button{flex:1}
    .save-toggle{width:100%; justify-content:flex-end}
}

label{font-size:.8rem;color:var(--muted);display:block;margin:4px 2px 6px}
select,input[type="text"]{width:100%;background:#0b1e28;border:1px solid rgba(255,255,255,.08);color:var(--text);
  padding:.6rem .75rem;border-radius:10px;outline:none;font-size:1rem}
.methods{display:flex;gap:10px;flex-wrap:wrap}
.methods label{display:inline-flex;} 
.hint{font-size:.8rem;color:var(--muted);margin-top:4px}

.btn{display:block;width:100%;padding:.9rem 1.1rem;border-radius:12px;background:linear-gradient(180deg,var(--accent),var(--accent-d));
  color:#2d2200;font-weight:800;border:none;cursor:pointer;letter-spacing:.15em;box-shadow:0 8px 18px rgba(255,188,64,.25);font-size:1.05rem}
.btn:disabled{opacity:.5;cursor:not-allowed}
.note{text-align:center;font-size:.8rem;color:var(--muted);margin:8px 0 0}

.result{margin-top:18px}
.usage-meter{font-size:.8rem;color:var(--muted);margin-top:10px; padding:0 24px;}

/* ==== Premium/Standard 統合デザイン (結果セクションの統一) ==== */
body.premium .result-hero{
  background: radial-gradient(1000px 400px at 50% -10%, rgba(255,215,128,.22), rgba(255,215,128,0) 55%),
              linear-gradient(180deg, rgba(255,230,170,.08), rgba(255,230,170,.02));
  border:1px solid rgba(255,255,255,.1); border-radius:16px; padding:18px; position:relative
}

/* 結果表示アニメーション */
@keyframes fadein { 
    from { opacity: 0; transform: translateY(20px); } 
    to { opacity: 1; transform: translateY(0); } 
} 
.animated-result { 
    animation: fadein 0.6s ease-out both; 
}

body.premium .result-hero .eyebrow{font-size:.78rem;letter-spacing:.2em;color:#ffe3a3;opacity:.9}
body.premium .result-hero .title-line{
  font-size:1.35rem;font-weight:900;margin:.25rem 0 .35rem;
  background:linear-gradient(90deg,#fff7d6,#ffe3a3,#fff7d6);
  -webkit-background-clip:text;background-clip:text;color:transparent
}
body.premium .result-hero .lead{color:#ffe3a3}
body.premium .kpi-row{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
body.premium .kpi{background:rgba(255,225,160,.10);border:1px solid rgba(255,230,170,.35);padding:.5rem .7rem;border-radius:12px;font-weight:800;color:#ffe9b8}

/* 占術特化情報の強調スタイル */
.kpi-row.special-row {
    justify-content: center; /* 中央寄せ */
    margin-top: 12px;
    margin-bottom: 5px;
    gap: 15px;
}
.kpi.special-key-card {
    font-size: 1.1rem;
    font-weight: 900;
    color: var(--love-text) !important;
    border-color: var(--love-text) !important;
    background: linear-gradient(90deg, rgba(255,100,160,.2), rgba(255,100,160,0)) !important;
    padding: 0.6rem 1.2rem;
    box-shadow: 0 0 10px rgba(255,100,160,.2);
}
.kpi.special-info {
    font-size: 0.95rem;
    background: rgba(100,150,255,.12);
    color: #6496ff;
    border-color: #6496ff;
}

body.premium .section{margin-top:12px;padding:14px;border-radius:14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.09)}
body.premium .section h4{margin:.2rem 0 .6rem;font-size:1rem;font-weight:900;color:#ffe6ad}
body.premium .section .sec{line-height:1.7; font-size:.95rem}
body.premium .section ul{padding-left:1.5em; line-height:1.7; margin-top:8px}

/* 誘惑の秘術モードの鑑定レポート部分の強調 (省略) */
body.premium .section .report-content strong {
    display: block;
    font-size: 1.05rem;
    font-weight: 900;
    margin-top: 10px;
    color: #ffd8a3; 
    padding-left: 5px;
    border-left: 4px solid #ffbc40;
}
body.premium .section .report-content p.sec {
    margin: 6px 0 0;
    padding-left: 10px;
}
body.premium .section.love h4 {
    color: #ff99d0; 
}

body.premium .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
body.premium .chip{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.18);padding:.28rem .6rem;border-radius:999px;font-weight:800;color:#fff}
body.premium .section.warn{border-color:#ffb3ca;background:linear-gradient(180deg, rgba(255,179,202,.12), transparent)}
body.premium .cta-row{display:flex;flex-wrap:wrap;margin-top:10px}
body.premium .cta{background:linear-gradient(180deg,#ffd27b,#ffb02e);color:#2a1a00;border:none;border-radius:12px;padding:.7rem 1rem;font-weight:900;cursor:pointer;box-shadow:0 6px 0 #c27f15}

/* 5つのアドバイス用の個別スタイル (省略) */
body.premium .section.love{background:var(--love-bg); border-color:var(--love-text);}
body.premium .section.love h4{color:var(--love-text);}
body.premium .section.work{background:var(--work-bg); border-color:var(--work-text);}
body.premium .section.work h4{color:var(--work-text);}
body.premium .section.money{background:var(--money-bg); border-color:var(--money-text);}
body.premium .section.money h4{color:var(--money-text);}
body.premium .section.health{background:var(--health-bg); border-color:var(--health-text);}
body.premium .section.health h4{color:var(--health-text);}
body.premium .section.spirit{background:var(--spirit-bg); border-color:var(--spirit-text);}
body.premium .section.spirit h4{color:var(--spirit-text);}


/* ==== Calendar (PC/横画面用 - デフォルト) ==== */
/* ★カレンダーの背景もカードの背景に合わせて統一 */
.cal-card{
    background:
        radial-gradient(800px 500px at 50% 0%, rgba(50, 100, 200, 0.3), rgba(50, 100, 200, 0) 65%),
        linear-gradient(180deg, #102535 0%, #0c1c2b 75%, #05141e 100%);
    border:1px dashed rgba(255,255,255,.22);
    margin-top:18px;
}
.cal-title{margin:0 0 8px;font-weight:900}
.legend{display:flex;gap:10px;flex-wrap:wrap;margin:4px 0 8px}
.badge{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:800;border:1px solid rgba(255,255,255,.25)}
.b-star{background:#c9ffe3;color:#064a3d}
.b-heart{background:#ffe6ef;color:#611c2b}
.b-money{background:#fff1b9;color:#5a4300}
.b-work{background:#e4f0ff;color:#143a6b}
.b-rest{background:#dbffe8;color:#094a2a}

.calendar-wrap {
    display: flex; 
    flex-direction: column;
}
.weekbar{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:8px;
    margin:8px 0
}
.weekbar span{font-size:12px;text-align:center;opacity:.95}
.grid14{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    grid-auto-flow: row; 
    gap:8px;
}
.cell{position:relative;background:var(--panel2);border:1px solid rgba(255,255,255,.08);border-radius:14px;min-height:96px;padding:10px 10px 12px;box-shadow:0 6px 14px rgba(0,0,0,.15)}
.date{display:flex;justify-content:space-between;align-items:center;font-size:13px;margin-bottom:6px;color:var(--muted)}
.emoji{font-size:20px}
.score{display:inline-flex;gap:6px;align-items:center;padding:5px 8px;border-radius:999px;font-weight:800;border:1px solid rgba(255,255,255,.18)}
.s-good{background:rgba(18,211,182,.18);color:#12d3b6}
.s-mid{background:rgba(255,210,102,.18);color:#ffd266}
.s-low{background:rgba(255,111,111,.18);color:#ff6f6f}


/* ==== Calendar (モバイル縦画面用 - 横スクロールを採用) ==== */
@media(max-width:540px){
    /* モバイル縦画面では、カレンダー全体（曜日ヘッダーと日付セル）を横スクロールさせる */
    .calendar-wrap {
        display: block; 
        overflow-x: auto; /* ★横スクロールを許可 */
        -webkit-overflow-scrolling: touch; 
        padding-bottom: 5px; 
    }

    /* 曜日バーと日付セルコンテナを、モバイル幅よりも広く設定 */
    .weekbar, .grid14 {
        display: grid;
        grid-template-columns: repeat(7, minmax(80px, 1fr)); /* ★セルの最小幅を確保（7列維持） */
        width: 560px; /* 80px * 7 = 560px の幅を確保し、スクロールを発生させる */
        min-width: 560px;
    }
    
    .cell {
        min-width: 80px; 
        min-height: 96px; 
        flex-shrink: 0;
        padding: 10px;
    }
    /* 曜日の幅をセルの幅に合わせる */
    .weekbar span {
        min-width: 80px;
        flex-shrink: 0;
    }
}